# Инструкция по настройке базы данных Supabase

## Проблема: "relation public.users does not exist"

Если вы видите эту ошибку, значит таблицы в базе данных не были созданы.

## Решение: Выполните полную инициализацию

### Шаг 1: Откройте Supabase Dashboard
1. Перейдите на https://supabase.com
2. Войдите в свой проект

### Шаг 2: Откройте SQL Editor
1. В левом меню выберите **SQL Editor**
2. Нажмите **New Query**

### Шаг 3: Выполните скрипт инициализации
1. Откройте файл `supabase/init.sql` из этого проекта
2. Скопируйте **весь** содержимое файла
3. Вставьте в SQL Editor Supabase
4. Нажмите **Run** или **Ctrl+Enter**

### Шаг 4: Проверка
После выполнения скрипта проверьте:

1. **Таблицы созданы:**
   - Database → Tables → должны быть: `users`, `user_stats`, `attempts`

2. **Функции созданы:**
   - Database → Functions → должны быть: `register_user`, `record_attempt`

3. **View создан:**
   - Database → Views → должен быть: `leaderboard`

## Важно!

⚠️ **Выполняйте весь скрипт целиком!** Не создавайте только функцию `register_user` - сначала должны быть созданы таблицы.

Скрипт `init.sql`:
- Создает все необходимые таблицы
- Создает все функции
- Настраивает права доступа
- Создает индексы и триггеры

## Альтернатива: Использование schema.sql

Если хотите использовать оригинальный `schema.sql`, убедитесь, что выполняете его **полностью**, а не только отдельные части.

---

После выполнения скрипта регистрация должна работать корректно!
