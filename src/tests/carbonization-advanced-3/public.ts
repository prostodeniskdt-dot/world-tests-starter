import type { PublicTest } from "../types";

export const CARBONIZATION_ADVANCED_3_PUBLIC: PublicTest = {
  id: "carbonization-advanced-3",
  title: "Тонкая настройка: компромиссы пузырьков",
  description: "Сложный • 20 вопросов",
  category: "карбонизация",
  difficultyLevel: 3,
  questions: [
    {
      id: "q1",
      type: "multiple-choice",
      text: "Мини-кейс: нужно быстрее насытить сладкую смесь, но нельзя менять рецептуру. Что наиболее системно?",
      options: ["Лучшее действие — увеличить контакт, чтобы компенсировать вязкость, для напитка, при заданных условиях.","Лучшее действие — увеличить сахар, чтобы компенсировать вязкость, для напитка, при заданных условиях.","Лучшее действие — поднять температуру, чтобы компенсировать вязкость, для напитка, при заданных условиях.","Лучшее действие — снизить давление, чтобы компенсировать вязкость, для напитка, при заданных условиях.","Лучшее действие — подать воздух, чтобы компенсировать вязкость, для напитка, при заданных условиях.","Лучшее действие — исключить санитацию, чтобы компенсировать вязкость, для напитка, при заданных условиях."],
      hint: "Сладость мешает растворению через воду и вязкость, поэтому логично усиливать контакт и кинетику. Остальные варианты ухудшают растворение или добавляют риски.",
    },
    {
      id: "q2",
      type: "two-step",
      text: "Двухступенчатое задание: что происходит с газом при наливе в бокал?",
      step1: {
        question: "Что происходит с CO₂ при наливе газированного напитка в бокал?",
        options: [
          "Часть CO₂ выходит из жидкости",
          "Весь CO₂ остается в жидкости",
          "CO₂ превращается в сахар",
          "CO₂ исчезает полностью"
        ]
      },
      step2: {
        question: "Выберите объяснение этого процесса:",
        options: [
          "Падение давления вызывает перестройку равновесия, и CO₂ частично выходит",
          "Повышение температуры всегда заставляет CO₂ выходить полностью",
          "Увеличение сахара блокирует CO₂ в жидкости навсегда",
          "Изменение pH превращает CO₂ в пектин автоматически"
        ]
      },
      hint: "Падение давления вызывает перестройку равновесия, и CO₂ частично выходит. Другие объяснения вводят «всегда» и не связаны с механизмом.",
    },
    {
      id: "q3",
      type: "select-errors",
      text: "Найдите 2 ошибки в плане ускоренной карбонизации.",
      content: "[1] Охладить смесь, чтобы повысить растворимость CO₂ при том же давлении. [2] Увеличить контакт фаз через агитацию, чтобы быстрее прийти к равновесию. [3] Подавать CO₂ внутрь жидкости, чтобы расширить площадь контакта. [4] Поднять температуру, чтобы повысить растворимость CO₂ при том же давлении. [5] Учесть сахар как фактор вязкости и конкуренции за воду при насыщении. [6] Проверять камень на трещины и обслуживать, чтобы поддерживать работу.",
      markedParts: [
        { id: 1, text: "Охладить смесь, чтобы повысить растворимость CO₂ при том же давлении.", start: 4, end: 73 },
        { id: 2, text: "Увеличить контакт фаз через агитацию, чтобы быстрее прийти к равновесию.", start: 77, end: 149 },
        { id: 3, text: "Подавать CO₂ внутрь жидкости, чтобы расширить площадь контакта.", start: 153, end: 216 },
        { id: 4, text: "Поднять температуру, чтобы повысить растворимость CO₂ при том же давлении.", start: 220, end: 294 },
        { id: 5, text: "Учесть сахар как фактор вязкости и конкуренции за воду при насыщении.", start: 298, end: 367 },
        { id: 6, text: "Проверять камень на трещины и обслуживать, чтобы поддерживать работу.", start: 371, end: 440 },
      ],
      allowMultiple: true,
      hint: "Повышение температуры обычно снижает растворимость CO₂; остальные шаги усиливают растворение через давление/контакт/обслуживание.",
    },
    {
      id: "q4",
      type: "matrix",
      text: "Для каждого объекта выберите характеристику (A–F).",
      rows: ["Сахар","Кислотность","Агитация"],
      columns: ["Снижает растворимость CO₂ и повышает вязкость, усложняя насыщение","Меняет формы угольной кислоты и сдвигает равновесие растворённого CO₂","Ускоряет достижение равновесия, увеличивая площадь контакта фаз","Убирает влияние давления, делая растворение независимым от газа","Всегда повышает растворимость CO₂, освобождая молекулы воды","Делает парциальность неважной, заменяя состав газа на температуру"],
      matrixType: "single-select",
      hint: "Три фактора разделены по механизму: вода/вязкость, химические формы, контакт/диффузия.",
    },
    {
      id: "q5",
      type: "multiple-select",
      text: "Какие два утверждения корректно описывают поры и обслуживание камня?",
      options: ["Меньшие поры дают более мелкие пузырьки, поэтому подача газа обычно идёт медленнее.","Меньшие поры дают более крупные пузырьки, поэтому подача газа обычно идёт быстрее.","Кипячение и мягкая чистка поддерживают эффективность, поэтому это часть регулярного обслуживания.","Засор не бывает никогда, поэтому кислотная обработка не имеет смысла вообще.","Санитация не нужна, потому что CO₂ сам по себе «стерилизует» пористую поверхность.","Трещины неважны, потому что пористая структура всегда одинакова при любом износе."],
      hint: "Верны связь «микронность → размер пузырьков → скорость подачи» и необходимость регулярного ухода. Остальные варианты отменяют обслуживание без оснований.",
    },
    {
      id: "q6",
      type: "ordering",
      text: "Расставьте «рычаги» по логике: сначала условия растворения, затем ускорение, затем гигиена перед применением.",
      items: ["Охладить смесь перед насыщением","Подать CO₂ и обеспечить контакт газ–жидкость","Увеличить контакт через агитацию или ввод газа в жидкость","Санитизировать камень непосредственно перед работой"],
      correctOrder: [],
      hint: "Сначала создают условия растворения (температура), затем подают газ, затем ускоряют кинетику контакта, а санитизация — перед использованием.",
    },
    {
      id: "q7",
      type: "multiple-choice",
      text: "Мини-кейс: смесь кажется «жёстко кислой» и при этом меняется ощущение газа. Что фактор объясняет связку лучше?",
      options: ["Основная причина — сдвиг форм угольной кислоты, при изменении pH, что меняет равновесие CO₂ в растворе.","Основная причина — рост вязкости, при изменении pH, что делает растворение CO₂ всегда быстрее.","Основная причина — исчезновение давления, при изменении pH, что делает парциальность CO₂ неважной.","Основная причина — рост сахара, при изменении pH, что делает растворение CO₂ мгновенным.","Основная причина — падение температуры, при изменении pH, что делает растворимость CO₂ всегда ниже.","Основная причина — рост крепости, при изменении pH, что делает растворимость CO₂ всегда выше."],
      hint: "pH влияет на кислотно-основные формы и равновесие растворённого CO₂. Остальные варианты смешивают уровни и механизмы.",
    },
    {
      id: "q8",
      type: "matching",
      text: "Соотнесите «подход» и «главный механизм».",
      leftItems: ["Перевернуть ПЭТ-бутылку перед встряхиванием","Положить кег на бок и перекатывать","Опустить диффузор глубже","Охладить смесь заранее"],
      rightItems: ["Увеличить путь пузырьков в жидкости и повысить суммарный контакт","Увеличить агитацию без подъёма и ускорить контакт фаз","Ввести газ в жидкость перед агитацией и расширить контакт газа с объёмом","Повысить растворимость CO₂ и облегчить достижение равновесия"],
      variant: "1-to-1",
      correctPairs: [],
      hint: "Техники различаются по «рычагу»: ввод газа внутрь, агитация, глубина/путь пузырьков, температура.",
    },
    {
      id: "q9",
      type: "grouping",
      text: "Разнесите элементы по категориям «физика растворения» и «обслуживание инструмента».",
      items: ["Парциальное давление в газовой смеси","Охлаждение для повышения растворимости CO₂","Короткая кислотная обработка при засоре","Проверка на трещины и износ","Агитация для увеличения площади контакта"],
      categories: ["Физика растворения","Обслуживание инструмента"],
      hint: "Первые три — про равновесие и кинетику, два последних — про работоспособность и санитарную безопасность.",
    },
    {
      id: "q10",
      type: "multiple-choice",
      text: "Что лучше описывает, почему «общего давления» недостаточно без учёта состава газа?",
      options: ["Верно, что важна доля CO₂, при смеси газов, поэтому парциальное давление определяет растворение.","Верно, что важен только общий уровень, при смеси газов, поэтому парциальность не влияет на растворение.","Верно, что важен только сахар, при смеси газов, поэтому парциальность не влияет на растворение.","Верно, что важен только pH, при смеси газов, поэтому парциальность не влияет на растворение.","Верно, что важен только осадок, при смеси газов, поэтому парциальность не влияет на растворение.","Верно, что важна только крепость, при смеси газов, поэтому парциальность не влияет на растворение."],
      hint: "Парциальное давление связывает состав смеси и растворение. Дистракторы игнорируют определение компонента в смеси.",
    },
    {
      id: "q11",
      type: "true-false-enhanced",
      text: "Утверждение: «Чем больше площадь контакта фаз, тем быстрее достигается равновесие».",
      statement: "Утверждение: «Чем больше площадь контакта фаз, тем быстрее достигается равновесие».",
      reasons: ["Причина — диффузия ускоряется при большем контакте, поэтому обмен газ–жидкость идёт быстрее.","Причина — давление исчезает при большем контакте, поэтому растворение становится независимым от газа.","Причина — сахар исчезает при большем контакте, поэтому вязкость всегда становится ниже.","Причина — pH исчезает при большем контакте, поэтому CO₂ превращается только в карбонат.","Причина — осадок исчезает при большем контакте, поэтому пузырьки никогда не образуются.","Причина — крепость исчезает при большем контакте, поэтому растворимость всегда одинаковая."],
      hint: "Больше контакта — быстрее обмен и выход к равновесию. Остальные причины подменяют механизм выдуманными «исчезновениями».",
    },
    {
      id: "q12",
      type: "cloze-dropdown",
      text: "Заполните пропуск: «Кислотность влияет на равновесие, потому что CO₂ гидратируется и образует ___».",
      gaps: [
        {
          index: 0,
          options: ["формы угольной кислоты", "сахар", "пектин", "спирт"]
        }
      ],
      hint: "Указана цепочка гидратации и форм H₂CO₃/HCO₃⁻/CO₃²⁻. Остальные варианты не соответствуют описанной химии.",
    },
    {
      id: "q13",
      type: "multiple-choice",
      text: "Мини-кейс: после обслуживания камень снова быстро засоряется. Что наиболее логичный вывод в рамках описанных рисков?",
      options: ["Наиболее вероятный риск — недостаточная регулярная очистка, при пористой структуре, из-за накопления отложений.","Наиболее вероятный риск — слишком тщательная санитация, при пористой структуре, из-за мгновенного разрушения пор.","Наиболее вероятный риск — отсутствие давления, при пористой структуре, из-за исчезновения парциальности CO₂.","Наиболее вероятный риск — избыток pH, при пористой структуре, из-за превращения CO₂ в сахар.","Наиболее вероятный риск — недостаток сахара, при пористой структуре, из-за исчезновения молекул воды.","Наиболее вероятный риск — избыток температуры, при пористой структуре, из-за полного растворения трещин."],
      hint: "Засорение названо типичным недостатком пористых камней и решается режимом обслуживания. Остальные варианты смешивают факторы и уровни причин.",
    },
    {
      id: "q14",
      type: "ordering",
      text: "Расставьте по логике «что меняет состояние» → «что меняет скорость» → «что меняет устойчивость инструмента».",
      items: ["Давление как условие растворения CO₂","Агитация как ускоритель контакта фаз","Размер пор как режим подачи пузырьков","Проверка на трещины как контроль износа"],
      correctOrder: [],
      hint: "Давление задаёт состояние равновесия, агитация ускоряет, поры меняют режим подачи, а контроль трещин относится к надёжности инструмента.",
    },
    {
      id: "q15",
      type: "matching",
      text: "Соотнесите «фактор» и «тип ошибки мышления», если его игнорируют.",
      leftItems: ["Температура","Сахар","Парциальное давление","Площадь контакта"],
      rightItems: ["Игнорируют ограничение растворимости и путают вкус с физикой растворения","Игнорируют вязкость и конкуренцию за воду, думая что «сладость не мешает»","Путают настройку по общему давлению с фактическим давлением компонента CO₂","Путают «достаточно подать газ» с «нужно ускорить диффузию через контакт»"],
      variant: "1-to-1",
      correctPairs: [],
      hint: "Ошибки различаются механизмом: подмена сенсорики, игнор вязкости, смешение общего и парциального, игнор кинетики контакта.",
    },
    {
      id: "q16",
      type: "multiple-select",
      text: "Какие два утверждения корректно связывают «сладость» и «скорость насыщения»?",
      options: ["Сладость повышает вязкость, поэтому диффузия замедляется и равновесие достигается дольше.","Сладость освобождает воду, поэтому CO₂ растворяется быстрее при тех же условиях.","Сладость конкурирует за молекулы воды, поэтому растворимость CO₂ обычно снижается.","Сладость убирает влияние давления, поэтому можно игнорировать парциальность CO₂ полностью.","Сладость убирает влияние температуры, поэтому охлаждение становится бессмысленным всегда.","Сладость превращает CO₂ в пектин, поэтому карбонизация идёт только через ферменты."],
      hint: "Описаны два согласованных механизма: вязкость и конкуренция за воду. Остальные варианты приписывают сахару несвязанные «отмены» факторов.",
    },
    {
      id: "q17",
      type: "true-false-enhanced",
      text: "Утверждение: «Чем ниже пористость по диаметру пор, тем быстрее подача газа».",
      statement: "Утверждение: «Чем ниже пористость по диаметру пор, тем быстрее подача газа».",
      reasons: ["Причина — меньшие поры дают меньшие пузырьки, поэтому подача обычно медленнее, но контакт выше.","Причина — меньшие поры дают большие пузырьки, поэтому подача обычно медленнее, но контакт ниже.","Причина — поры не влияют на пузырьки, поэтому скорость всегда одинаковая при любом камне.","Причина — поры влияют только на вкус, поэтому скорость подачи не связана с размером пузырьков.","Причина — поры исчезают при санитации, поэтому скорость подачи становится бесконечной.","Причина — поры зависят только от сахара, поэтому скорость подачи определяется рецептурой."],
      hint: "Меньшие поры дают более мелкие пузырьки и часто более медленную подачу. Дистракторы либо переворачивают связь, либо отрицают влияние пор.",
    },
    {
      id: "q18",
      type: "cloze-dropdown",
      text: "Заполните пропуск: «Парциальное давление компонента пропорционально его ___ в смеси».",
      gaps: [
        {
          index: 0,
          options: ["доле (концентрации)", "температуре", "массе", "объему"]
        }
      ],
      hint: "Парциальность определяется составом газовой смеси. Остальные характеристики относятся к жидкости и не являются определением.",
    },
    {
      id: "q19",
      type: "grouping",
      text: "Разнесите элементы по категориям «влияет на равновесие» и «влияет на скорость».",
      items: ["Давление и парциальность CO₂","Температура смеси","Агитация и перекатывание","Глубина размещения диффузора","Время ожидания без движения"],
      categories: ["Влияет на равновесие","Влияет на скорость"],
      hint: "Давление и температура задают равновесную растворимость, а контакт/глубина/время управляют тем, как быстро к нему приходят.",
    },
    {
      id: "q20",
      type: "multiple-choice",
      text: "Какой вариант лучше всего описывает «системное мышление» по пяти опорам без подмены одной другой?",
      options: ["Верно, что опоры взаимосвязаны, при настройке процесса, поэтому корректируют и условия, и скорость.","Верно, что опоры независимы, при настройке процесса, поэтому можно менять только один фактор всегда.","Верно, что опоры равны сахару, при настройке процесса, поэтому достаточно менять только сладость.","Верно, что опоры равны pH, при настройке процесса, поэтому достаточно менять только кислотность.","Верно, что опоры равны температуре, при настройке процесса, поэтому достаточно менять только холод.","Верно, что опоры равны контакту, при настройке процесса, поэтому давление можно игнорировать."],
      hint: "Системность — учитывать баланс условий (равновесие) и кинетику (скорость). Дистракторы сводят всё к одному рычагу и смешивают уровни.",
    }
  ],
};
