# World Tests (starter)

–ü—Ä–æ–µ–∫—Ç: **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç —Å —Ç–µ—Å—Ç–∞–º–∏** + **–º–∏—Ä–æ–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥** (leaderboard) –Ω–∞ **Next.js (Vercel)** + **Supabase (Postgres)** + **Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**.

## –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å
- üîê **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Telegram Login Widget
- üìù –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/test` ‚Äî –¥–µ–º–æ‚Äë—Ç–µ—Å—Ç (–≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ, –æ—Ç–≤–µ—Ç—ã/–ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- üèÜ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/leaderboard` ‚Äî –æ–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ (–ø–æ —Å—É–º–º–µ –æ—á–∫–æ–≤) —Å –∏–º–µ–Ω–∞–º–∏, —Ñ–∞–º–∏–ª–∏—è–º–∏ –∏ Telegram –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- üë§ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/profile` ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏—Å—Ç–æ—Ä–∏–µ–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- API:
  - `POST /api/auth/telegram` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
  - `POST /api/submit` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤)
  - `GET /api/leaderboard` ‚Äî —Ç–æ–ø —Ä–µ–π—Ç–∏–Ω–≥–∞ (JSON)
  - `GET /api/user/profile` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `GET /api/user/attempts` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

> –í–∞–∂–Ω–æ: –∫–ª—é—á Supabase **service role** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤ API/Server Components). –ù–∞ –∫–ª–∏–µ–Ω—Ç –æ–Ω –Ω–µ —É—Ç–µ–∫–∞–µ—Ç.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

### 1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
npm i
```

### 2) –°–æ–∑–¥–∞—Ç—å Supabase –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å SQL
1. –°–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç –≤ Supabase
2. –û—Ç–∫—Ä–æ–π **SQL editor**
3. –í—Å—Ç–∞–≤—å –∏ –≤—ã–ø–æ–ª–Ω–∏: `supabase/schema.sql`

### 3) –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞
1. –û—Ç–∫—Ä–æ–π [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/newbot` –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)
4. –ó–∞–ø–æ–º–Ω–∏ –∏–º—è –±–æ—Ç–∞ (username –±–µ–∑ @, –Ω–∞–ø—Ä–∏–º–µ—Ä: `my_test_bot`)

### 4) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
SUPABASE_URL=your_supabase_url_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
NEXT_PUBLIC_TELEGRAM_BOT_NAME=your_bot_username_here
```

**–í–∞–∂–Ω–æ**: `NEXT_PUBLIC_TELEGRAM_BOT_NAME` ‚Äî —ç—Ç–æ username –±–æ—Ç–∞ –ë–ï–ó —Å–∏–º–≤–æ–ª–∞ @ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `my_test_bot`)

### 5) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Login Widget
1. –û—Ç–∫—Ä–æ–π —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å `/setdomain`
3. –í—ã–±–µ—Ä–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
4. –£–∫–∞–∂–∏ –¥–æ–º–µ–Ω, –≥–¥–µ –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â—ë–Ω —Å–∞–π—Ç (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: `localhost`)

### 6) –ó–∞–ø—É—Å–∫
```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π: http://localhost:3000

---

## –î–µ–ø–ª–æ–π –Ω–∞ Vercel

1) –ó–∞–ª–µ–π –ø—Ä–æ–µ–∫—Ç –≤ GitHub/GitLab
2) –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Vercel
3) –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ (Settings ‚Üí Environment Variables) –¥–æ–±–∞–≤—å env vars:
- `SUPABASE_URL`
- `SUPABASE_SERVICE_ROLE_KEY`
- `TELEGRAM_BOT_TOKEN` (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏–∑ @BotFather)
- `NEXT_PUBLIC_TELEGRAM_BOT_NAME` (username –±–æ—Ç–∞ –±–µ–∑ @)

4) –í @BotFather —É–∫–∞–∂–∏ –¥–æ–º–µ–Ω –¥–ª—è Telegram Login Widget:
- `/setdomain` ‚Üí –≤—ã–±–µ—Ä–∏ –±–æ—Ç–∞ ‚Üí —É–∫–∞–∂–∏ –¥–æ–º–µ–Ω Vercel (–Ω–∞–ø—Ä–∏–º–µ—Ä: `your-app.vercel.app`)

5) Deploy

---

## –ì–¥–µ —á—Ç–æ –º–µ–Ω—è—Ç—å

- –¢–µ—Å—Ç: `src/tests/test-1.public.ts` (—á—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –û—Ç–≤–µ—Ç—ã (—Å–µ—Ä–≤–µ—Ä): `src/tests/test-1.answer.ts` (–Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–ª–∏–µ–Ω—Ç!)
- –§–æ—Ä–º—É–ª–∞ –æ—á–∫–æ–≤: `src/app/api/submit/route.ts`
- UI —Å—Ç—Ä–∞–Ω–∏—Ü: `src/app/*`
- SQL —Å—Ö–µ–º–∞: `supabase/schema.sql`

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–∫–æ–≥–¥–∞ –±—É–¥–µ—à—å —Ä–∞—Å—à–∏—Ä—è—Ç—å)
- –î–æ–±–∞–≤–∏—Ç—å Auth (Supabase Auth) –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ `auth.uid()`
- –•—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ –±–∞–∑–µ (questions –ø—É–±–ª–∏—á–Ω–æ, –æ—Ç–≤–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä/–ø—Ä–∏–≤–∞—Ç–Ω–æ)
- –°–µ–∑–æ–Ω—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–Ω—Ç–∏—á–∏—Ç, –ª–∏–º–∏—Ç—ã –ø–æ–ø—ã—Ç–æ–∫, ‚Äú–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∑–∞—á—ë—Ç‚Äù –∏ —Ç.–¥.
